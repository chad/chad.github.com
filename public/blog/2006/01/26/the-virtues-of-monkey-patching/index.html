
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title> The Virtues of Monkey Patching - The Passionate Programmer</title>
  <meta name="author" content="Chad Fowler">

  
  <meta name="description" content="The Virtues of Monkey Patching 2006.01.26 From a semi-recent <a
href="http://blog.ianbicking.org/theres-so-much-more-than-rails.html">post
by Python &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://chad.github.com/blog/2006/01/26/the-virtues-of-monkey-patching/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/main.css" media="screen, projection" rel="stylesheet" type="text/css">

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="/javascripts/jquery.min.js"><\/script>')</script>
  <script src="/javascripts/vendor/modernizr.min.js"></script>
  <script src="/javascripts/vendor/prefixfree.min.js"></script>

  <link href="/atom.xml" rel="alternate" title="The Passionate Programmer" type="application/atom+xml">
  


</head>

<body  class="preload  ">
  <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
  <![endif]-->

  <span class="page-name">Chad Fowler</span>

  <header id="page-header" role="banner">
     <hgroup>
      <h1>Chad <span>Fowler</span></h1>
      
        <h2>practical self-engineering</h2>
      
    </hgroup>
    <nav id="site-navigation">
  <ol class="main-navigation">
    <li><a href="/">Home</a></li>
    <li><a href="/about">About</a></li>
    <li><a href="/speaking">Speaking</a></li>
    <li><a href="/books">Books</a></li>
    <li><a href="/interviews">Interviews</a></li>
    <li><a href="/contact">Contact</a></li>
    <li><a href="/blog/archives">Archives</a></li>
  </ol>
</nav>



  </header><!-- /header#page-header -->


  </header>

  <div id="main" role="main">
    <section id="content">
      <article class="hentry" role="article">
  
  <header>
    
      <h1>The Virtues of Monkey Patching</h1>
    
    
        








  


<time datetime="2006-01-26T00:00:00+01:00" pubdate data-updated="true">2006.01.26</time>
    
  </header>


<div class="article-content">
  <p>From a semi-recent <a
href="http://blog.ianbicking.org/theres-so-much-more-than-rails.html">post</a><br />
by Python programmer Ian Bicking:</p>
<pre>
  You can monkeypatch code in Python pretty easily, but we look down
  on it enough that we call it &amp;quot;monkeypatching&amp;quot;. In Ruby they call it
  &amp;quot;opening a class&amp;quot; and think it's a cool feature.
  I will assert: we are right, they are wrong.
</pre>
<p>
<p>Today, I was frustrated by a Rails bug affecting pagination with joins. In<br />
short, it doesn&#8217;t work. At all.</p>
</p>
<p>
<p>Miraculously, (no, it wasn&#8217;t a coincidence&#8212;it was an actual<br />
miracle) <a href="http://glu.ttono.us/">Kevin Clark</a> posted a message to<br />
the Rails Core list <em>right</em> in the middle of this episode<br />
complaining about the exact same problem. He said he was working on a fix.<br />
<a href="http://jthopple.com/">Jeremy Hopple</a> responded a little over an hour later saying that he had<br />
already submitted a <a
href="http://dev.rubyonrails.org/ticket/2597">patch</a> for the bug.</p>
</p>
<p>
<p>Visions of the nasty download/patch process started trudging through my<br />
mind, but I was desperate for a fix so I would have dealt with the<br />
ugliness. I hate hacking my local Rails (I&#8217;m running off of trunk<br />
using svn:externals) because I don&#8217;t like dealing with what happens<br />
when the change actually gets applied to trunk or dealing with merges for<br />
other changes to the same files. It&#8217;s not rocket science to get<br />
working but it&#8217;s also not fun.</p>
</p>
<p>
<p>Looking more closely at Jeremy&#8217;s email, he&#8217;s also distributing<br />
his patch as a Rails plugin. So:</p>
</p>
<pre>
  $ ruby script/plugin install count_limit_assocations
</pre>
<p>
<p>Now my code works. The bug is fixed. The plugin contains essentially<br />
nothing but a file that &quot;monkey patches&quot; some of the Rails core<br />
classes, implementing the changed version of the code.</p>
</p>
<p>
<p>When the change is merged into the Rails trunk, I&#8217;ll just<br />
&#8216;script/plugin remove&#8217; Jeremy&#8217;s plugin.</p>
</p>
<p>
<p>The Rails team is already using plugins like this as a way to get new<br />
functionality into circulation as a kind of proving ground before things<br />
make it into Rails core. And as we see today, it&#8217;s also a simple,<br />
painless way to get fixes distributed before they&#8217;re reviewed and<br />
committed. Sure, you can do the more obvious thing with plugins and<br />
distribute code that implements new functionality altogether. But this<br />
&quot;monkey patching&quot; thing is seriously powerful and, as an end-usre<br />
in this case, I can say that it makes things better for the <em>users</em><br />
of Ruby.</p>
</p>
<p>
<p>So Ian, with respect, no&#8230;you&#8217;re not right.</p>
</p>
<p>
<p><span class="caps">UPDATE</span>: Ian sent me the following clarification by email (reprinted with<br />
permission&#8212;thanks Ian!):</p>
</p>
<pre>
  Hi Chad.  Saw your post on monkeypatching.  Just thought I'd clarify
  that I don't think that kind of use is wrong, and I do that frequently
  -- applying a patch at runtime to the objects in memory, instead of the
  source code on disk.  It can be expedient, and certainly a whole lot
  better than trading patches around.  The use I object to that I see in
  lots of Ruby examples (and maybe isn't indicative of most real Ruby
  code) is when people add methods to other classes that aren't meant to
  fix anything, but just because they don't have an object of their own to
  hang the method off of.  I've seen several examples where people add
  methods to Array to implement some recursive algorithm, instead of using
  a function.  Or Rails adding methods to numbers to create time delta
  objects (well, it would be good if they *were* time delta objects, but I
  understand they actually just return seconds as ints, but that's another
  issue entirely).

  The term &amp;quot;monkeypatch&amp;quot; is really meant to denote that.  It's a patch, a
  fix, an adjustment to the code.  The monkey part has a history (that
  someone left on my post) that I think more-or-less is meant to indicate
  a certain subversive intent, or at least playfully but maybe mischievous
  manipulation.  We do it often in Python, but everytime we do it we know
  we are working around the system and not with it.  Which is fine too,
  but it's not the sort of thing you want as a foundation.
</pre>
  
    <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://chad.github.com/blog/2006/01/26/the-virtues-of-monkey-patching/" data-via="chadfowler" data-counturl="http://chad.github.com/blog/2006/01/26/the-virtues-of-monkey-patching/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

  
</div>


  <footer>
    <p>
      
  

<span class="byline author vcard">Posted by <span class="fn">Chad Fowler</span></span>

      








  


<time datetime="2006-01-26T00:00:00+01:00" pubdate data-updated="true">2006.01.26</time>
      


    </p>
  </footer>
</article>


<div class="pagination">
  
    <a class="prev" href="/blog/2006/01/25/fight-the-traffic-keynote-presentation/" title="Previous Post: Fight The Traffic Keynote Presentation
">&laquo; Fight The Traffic Keynote Presentation
</a>
  
  
    <a class="next" href="/blog/2006/01/27/join-map-p-cast-qw-erl-od/" title="Next Post: join(" ", map {"P" . $_ . "cast"} qw(erl od));">join(" ", map {"P" . $_ . "cast"} qw(erl od)); &raquo;</a>
  
</div>
    </section>
    <aside id="page-sidebar">
      
        <ol id="social-media-links">
  <li class="github"><a href="https://github.com/chad?rel=author">Github</a></li>
  <li class="twitter"><a href="https://twitter.com/chadfowler?rel=author">Twitter</a></li>
  <li class="google-plus"><a href="https://plus.google.com/115940317748827567617?rel=author">Google Plus</a></li>
  <li class="rss"><a href="http://feeds.feedburner.com/Chadfowlercom">RSS</a></li>
</ol><section id="upcoming-speaking" class="widget">
  <h2 class="widget-header">See Me Speak</h2>
  <ol>
      <li class="vevent">
        <span class="summary"><a href="http://joyofcoding.org">Joy of Coding</a></span>
        <span class="location">Rotterdam</span>
        <span class="the-date">March 1, 2013</span>
      </li>
        <li class="vevent">
        <span class="summary"><a href="http://railsberry.com">Railsberry</a></span>
        <span class="location">Krakow</span>
        <span class="the-date">April 22-23, 2013</span>
      </li>
      <li class="vevent">
        <span class="summary"><a href="http://2013.la-conf.org/">La Conf</a></span>
        <span class="location">Paris</span>
        <span class="the-date">May 9-10, 2013</span>
      </li>
      <li class="vevent">
        <span class="summary"><a href="http://www.nordicruby.org/">Nordic Ruby</a></span>
        <span class="location">Stockholm</span>
        <span class="the-date">June 6-9, 2013</span>
      </li>
  </ol>

  <a class="more-events" href="#">More Events »</a>
  <p class="i-speak">Want me to speak at your event? <a href="mailto:chad@chadfowler.com">Email me.</a></p>
</section>
<section class="widget">
  <h2 class="widget-header">Recent Posts</h2>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/02/15/switched-to-github/">Switched to github page, octopress, and a new design</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/08/moving-to-berlin-and-auf-wiedersehen-to-friends/">Moving to Berlin and auf wiedersehen to friends</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/29/leaving-a-legacy-system-revisited/">Leaving a Legacy System revisited</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/12/27/the-art-craft-commodity-continuum/">The art/craft/commodity continuum</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/12/21/re-thinking-software-development-education/">Re-thinking Software Development Education</a>
      </li>
    
  </ul>
</section>

      
    </aside>
  </div><!-- /div#main -->

  <footer id="page-footer" role="contentinfo">
    <section  class="hreview book"  id="passionate-programmer-book">
  <a href="http://pragprog.com/book/cfcar2/the-passionate-programmer">
  <img src="/images/passionate-programmer-book.jpg" alt="The Passionate Programmer">
  <h1 class="summary">Get Passionate Again</h1>
  <p class="description" >Remarkable careers don't come by change. Some other stuff you want to say about your book, but not to much cause people click before they read anyway.</p>
  </a>
  <blockquote>
    <p>I was blown away.</p>
  </blockquote>
  <cite><a href="http://pragdave.pragprog.com/">Dave Thomas, Pragmatic Programmers</a></cite>
</section>



  <section id="latest-tweet">
    <script src="/javascripts/twitter.js" type="text/javascript"> </script>
      <script type="text/javascript">
        jQuery(function($) {
          getTwitterFeed("chadfowler", 1, false);
        });
      </script>>
    <blockquote class="twitter-tweet">
      <ul id="tweets">
        <li class="loading">Status updating...</li>
      </ul>
    </blockquote>
    <a class="user" href="https://twitter.com/chadfowler">@chadfowler</a>
    <span id="tweet-time"></span>
  </section>


<p class="copyright">The Passionate Programmer © 2013  Chad Fowler .</p>


  </footer>

  

<script type="text/javascript">
      var disqus_shortname = 'chadfowler';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>






  <script src="/javascripts/vendor/prism.min.js"></script>
  <script src="/javascripts/plugins.js"></script>
  <script src="/javascripts/main.js"></script>

  

</body>
</html>